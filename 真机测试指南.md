# 📱 iPhone 真机测试指南

## 🎯 使用 iPhone 17 Pro Max 真机测试

真机测试比模拟器更好：
- ✅ 更接近真实用户体验
- ✅ 可以测试真实设备功能（相机、GPS、通知等）
- ✅ 性能测试更准确
- ✅ 无需占用 Mac 屏幕空间

---

## 🚀 快速开始（3 步）

### 步骤 1：在 iPhone 上安装 Expo Go

1. 打开 iPhone 的 **App Store**
2. 搜索 "**Expo Go**"
3. 点击 **获取** 或 **安装**
4. 等待安装完成

### 步骤 2：确保手机和电脑在同一 Wi-Fi

**重要**：iPhone 和 Mac 必须在同一个 Wi-Fi 网络下！

检查方法：
- iPhone：设置 → Wi-Fi → 查看网络名称
- Mac：系统设置 → 网络 → 查看 Wi-Fi 名称
- 确保两者连接的是**同一个 Wi-Fi 网络**

### 步骤 3：启动 Expo 并扫描二维码

在 Cursor 终端运行：

```bash
cd "/Users/niyutong/Desktop/AI聚合器开发方式Two"
npm run dev:phone
```

或者：

```bash
npx expo start
# 启动后按 'q' 键显示二维码
```

启动后，终端会显示二维码。

---

## 📱 在 iPhone 上连接

### 方法 1：使用相机扫描（最简单，推荐）

1. 打开 iPhone 的 **相机** App
2. 将相机对准终端中的二维码
3. 点击屏幕上出现的通知
4. 会自动打开 Expo Go 并加载应用

### 方法 2：使用 Expo Go App 扫描

1. 打开 **Expo Go** App
2. 点击 **Scan QR Code**
3. 扫描终端中的二维码
4. 应用会自动加载

### 方法 3：手动输入 URL（如果二维码扫描失败）

1. 在终端中找到类似这样的 URL：
   ```
   exp://192.168.0.100:8081
   ```
2. 打开 **Expo Go** App
3. 点击 **Enter URL manually**
4. 输入这个 URL
5. 点击 **Connect**

---

## 🎨 实现"边写边看"的布局

### 推荐布局方式

```
┌─────────────────────────────────────────┐
│                                         │
│  左边 2/3 (Cursor 编辑器)               │
│  ┌──────────────────────────┐           │
│  │                          │           │
│  │   你的代码                │           │
│  │   src/App.tsx            │           │
│  │   components/            │           │
│  │                          │           │
│  └──────────────────────────┘           │
│                                         │
│  右边 1/3 (iPhone 17 Pro Max)           │
│  ┌──────────────┐                       │
│  │              │                       │
│  │  iPhone      │                       │
│  │  实时预览     │                       │
│  │              │                       │
│  └──────────────┘                       │
│                                         │
└─────────────────────────────────────────┘
```

### 实际摆放建议

1. **Mac 屏幕左边**：Cursor 编辑器（全屏或 2/3 屏幕）
2. **Mac 屏幕右边**：iPhone 17 Pro Max 真机（放在 Mac 旁边）
3. **或者**：使用 iPhone 支架，放在 Mac 右侧

这样你可以：
- 左边写代码
- 右边看效果（在真机上）
- 修改代码后自动热重载

---

## 🔧 启动脚本（一键启动）

我已经为你创建了真机测试启动脚本：

```bash
cd "/Users/niyutong/Desktop/AI聚合器开发方式Two"
./start-dev-phone.sh
```

这个脚本会：
1. ✅ 清理端口
2. ✅ 检查依赖
3. ✅ 启动 Expo 开发服务器
4. ✅ 显示二维码
5. ✅ 提示你扫描二维码

---

## 💡 使用提示

### 热重载

- 修改代码后，保存文件（`⌘ + S`）
- iPhone 上的应用会自动重新加载
- 无需手动刷新！

### 重新加载

如果应用没有自动更新：
1. 在 Expo Go 中，**摇一摇 iPhone**
2. 选择 **Reload**
3. 或者在终端按 `r` 键

### 查看日志

- 在终端可以看到应用的日志输出
- 错误信息会显示在终端
- 也可以在 Expo Go 中查看错误

---

## 🐛 常见问题

### 问题 1：无法连接到开发服务器

**原因**：手机和电脑不在同一 Wi-Fi

**解决方案**：
1. 检查 iPhone 和 Mac 是否连接同一 Wi-Fi
2. 如果使用 VPN，可能需要关闭
3. 检查防火墙设置

### 问题 2：二维码扫描后无法加载

**解决方案**：
1. 检查 Wi-Fi 连接
2. 尝试手动输入 URL（见上面的方法 3）
3. 在终端按 `r` 重新加载
4. 检查防火墙是否阻止了连接

### 问题 3：应用加载很慢

**原因**：首次加载需要下载 JavaScript bundle

**解决方案**：
- 首次加载确实会慢一些（30-60 秒）
- 之后会快很多
- 确保 Wi-Fi 连接稳定

### 问题 4：修改代码后没有自动更新

**解决方案**：
1. 确保保存了文件（`⌘ + S`）
2. 在 iPhone 上摇一摇，选择 Reload
3. 或者在终端按 `r` 键

---

## 📋 完整工作流程

### 第一次使用

```
1. 在 iPhone 上安装 Expo Go
   └─ App Store → 搜索 "Expo Go" → 安装

2. 确保同一 Wi-Fi
   └─ iPhone 和 Mac 连接同一 Wi-Fi

3. 启动 Expo
   └─ npm run expo:qr

4. 扫描二维码
   └─ iPhone 相机 → 扫描 → 自动打开 Expo Go

5. 开始开发
   └─ 在 Cursor 中写代码 → 保存 → iPhone 自动更新
```

### 日常使用

```
1. 启动 Expo
   └─ npm run expo:qr

2. 在 iPhone 上打开 Expo Go
   └─ 会自动连接到开发服务器（如果之前连接过）

3. 开始开发
   └─ 写代码 → 保存 → 自动更新
```

---

## 🎯 真机测试的优势

使用 iPhone 17 Pro Max 真机测试的好处：

- ✅ **真实性能**：可以看到应用在真实设备上的表现
- ✅ **真实屏幕**：6.9 英寸大屏，测试布局和响应式设计
- ✅ **真实功能**：可以测试相机、GPS、通知等原生功能
- ✅ **真实网络**：测试真实的网络环境
- ✅ **真实交互**：触摸、手势、3D Touch 等

---

## 🚀 快速命令

```bash
# 启动 Expo（推荐）
npm run dev:phone

# 或者
npx expo start
# 启动后按 'q' 键显示二维码

# 重新加载应用（在终端按 'r'）
# 或在 iPhone 上摇一摇选择 Reload

# 停止开发服务器
# 在终端按 Ctrl+C
```

---

## ✅ 检查清单

开始测试前，确保：

- [ ] Expo Go 已安装在 iPhone 上
- [ ] iPhone 和 Mac 在同一 Wi-Fi 网络
- [ ] Expo 开发服务器已启动
- [ ] 二维码已显示在终端
- [ ] iPhone 已扫描二维码并连接成功

---

## 🎉 开始享受真机开发体验！

现在你可以：
- ✅ 在 Cursor 中写代码（Mac 左边）
- ✅ 在 iPhone 17 Pro Max 上实时查看效果（Mac 右边或旁边）
- ✅ 修改代码后自动热重载
- ✅ 测试真实设备功能

**祝你开发愉快！** 🚀
