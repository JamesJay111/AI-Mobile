# GemGPT 实时预览开发指南

## 🎯 目标
在 Cursor 中实现左侧写代码，右侧实时预览的开发体验。

## 🚀 快速开始

### 方法1: 使用 Vite 开发服务器（推荐）

1. **启动开发服务器**:
   ```bash
   npm run dev
   ```

2. **自动打开浏览器**:
   - 服务器会自动在 `http://localhost:3000` 打开浏览器
   - 如果没有自动打开，手动访问: `http://localhost:3000`

3. **实时预览**:
   - 左侧：在 Cursor 中编辑代码
   - 右侧：浏览器自动刷新显示最新效果
   - **Hot Module Replacement (HMR)**: 大部分更改无需刷新页面

### 方法2: 使用 Cursor 内置预览（如果支持）

1. 在 Cursor 中按 `Cmd+Shift+P` (Mac) 或 `Ctrl+Shift+P` (Windows)
2. 搜索 "Simple Browser" 或 "Preview"
3. 输入 URL: `http://localhost:3000`

## 📐 开发工作流

### 左侧：Cursor 编辑器
```
src/
  ├── components/        ← 编辑组件
  ├── services/         ← 编辑API调用
  ├── config/          ← 编辑配置
  └── styles/          ← 编辑样式
```

### 右侧：浏览器预览
- 地址: `http://localhost:3000`
- 实时显示代码更改
- 可以测试所有交互功能

## 🔥 Vite HMR 特性

### 自动热更新
- **React 组件**: 修改组件后自动更新，保持组件状态
- **CSS 样式**: 样式更改立即生效
- **TypeScript**: 类型错误会在浏览器中显示

### 错误提示
- 编译错误: 显示在浏览器中
- 运行时错误: 显示在浏览器控制台
- 类型错误: 显示在终端

## 🎨 预览功能测试清单

开发时，在浏览器中验证：

### 基础功能
- [ ] 页面正常加载
- [ ] 所有组件正确渲染
- [ ] 样式符合设计规范

### 交互功能
- [ ] 按钮点击有反馈
- [ ] Modal 打开/关闭正常
- [ ] 表单输入正常
- [ ] 下拉菜单正常

### 状态管理
- [ ] Loading 状态显示正确
- [ ] Error 状态显示错误信息
- [ ] Success 状态显示成功反馈
- [ ] 按钮禁用状态正确

### 响应式设计
- [ ] 移动端视图正常（使用浏览器 DevTools）
- [ ] 平板视图正常
- [ ] 桌面视图正常

## 🛠️ 开发命令

```bash
# 启动开发服务器（自动打开浏览器）
npm run dev

# 启动开发服务器（允许外部访问，用于手机预览）
npm run dev:host

# 构建生产版本
npm run build

# 预览生产构建
npm run preview
```

## 📱 移动端预览

### 方法1: 使用浏览器 DevTools
1. 打开浏览器 DevTools (F12)
2. 点击设备工具栏图标（或按 `Cmd+Shift+M` / `Ctrl+Shift+M`）
3. 选择设备（iPhone, iPad, Android等）
4. 调整窗口大小查看响应式效果

### 方法2: 在同一网络下的手机预览
1. 启动开发服务器: `npm run dev:host`
2. 查看终端输出的网络地址（如: `http://192.168.1.100:3000`）
3. 在手机浏览器中输入该地址

## 🐛 故障排除

### 端口被占用
如果 3000 端口被占用，修改 `vite.config.ts`:
```typescript
server: {
  port: 3001, // 改为其他端口
}
```

### 更改不显示
1. **硬刷新浏览器**: `Cmd+Shift+R` (Mac) 或 `Ctrl+Shift+R` (Windows)
2. **清除浏览器缓存**: DevTools → Application → Clear storage
3. **重启开发服务器**: 停止后重新运行 `npm run dev`

### 构建错误
1. 检查终端中的错误信息
2. 检查 TypeScript 类型错误
3. 检查导入路径是否正确

### HMR 不工作
1. 检查文件是否在 `src/` 目录下
2. 检查是否有语法错误阻止编译
3. 尝试重启开发服务器

## 💡 开发技巧

### 1. 使用浏览器 DevTools
- **Elements**: 检查 DOM 结构
- **Console**: 查看日志和错误
- **Network**: 监控 API 请求
- **React DevTools**: 检查组件状态（需要安装扩展）

### 2. 快速调试
```typescript
// 在代码中添加 console.log
console.log('Current state:', { isLoading, error, data });

// 在浏览器控制台查看
```

### 3. 样式调试
- 使用浏览器 DevTools 的 Elements 面板
- 实时修改 CSS 查看效果
- 复制修改后的样式到代码中

### 4. 组件测试
- 在浏览器中直接测试所有交互
- 检查不同屏幕尺寸下的表现
- 测试加载/错误/成功状态

## 📋 开发检查清单

每次开发新功能时：

1. **代码编写**
   - [ ] 在 Cursor 中编写组件代码
   - [ ] 遵循项目代码规范

2. **实时预览**
   - [ ] 在浏览器中查看效果
   - [ ] 检查 UI 是否符合设计
   - [ ] 测试所有交互功能

3. **状态测试**
   - [ ] 测试 Loading 状态
   - [ ] 测试 Error 状态
   - [ ] 测试 Success 状态

4. **响应式测试**
   - [ ] 测试移动端视图
   - [ ] 测试平板视图
   - [ ] 测试桌面视图

5. **功能验证**
   - [ ] 所有按钮正常工作
   - [ ] 所有 Modal 正常打开/关闭
   - [ ] 所有表单正常提交
   - [ ] API 调用正常

## 🎯 最佳实践

1. **保持浏览器打开**: 开发时始终在浏览器中查看效果
2. **使用 HMR**: 利用热更新快速迭代
3. **及时测试**: 每完成一个小功能就测试
4. **检查控制台**: 及时查看错误和警告
5. **移动端测试**: 定期检查移动端表现

## 🔗 相关资源

- [Vite 文档](https://vitejs.dev/)
- [React 文档](https://react.dev/)
- [Tailwind CSS 文档](https://tailwindcss.com/)

---

**提示**: 开发时保持 `npm run dev` 运行，这样每次保存文件都会自动更新浏览器预览！
